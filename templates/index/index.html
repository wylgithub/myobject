{% extends "base.html" %}
{% load staticfiles %}
{% load extfilters %}
{% block title %} - 首页{% endblock %}
{% block content %}
    <input type="hidden" id="amd_module" value="{% static "js/views/index.js" %}"/>
    <style type="text/css">
        #Home{text-align: center;
                color: #000000;
        }
    </style>
    {% if not user.is_superuser %}
    <div class="container" style="margin-top:100px;">
        <p><h1 id="Home">欢迎访问家庭理财管理系统</h1></p>
    </div>
    <div>
        <div id="myCarousel" class="carousel slide">
          <div class="carousel-inner">
            {% if user_count == 0 %}
            <div class="active item">
                <a href="/user_account/list/">
                <div class="active item">
                    <div class="row">
                        <div class="span12 alert alert-block">
                            <h4>注意!</h4>
                            用户信息不存在,请点击添加!。
                        </div>
                    </div>
                </div>
                </a>
            </div>
            {% else %}
            <div class="active item">
                <a href="/user_account/list/">
                    <div class="row">
                        <div class="span12">
                            <div class="search_result_list">
                                <button type="button" id="btnRegister" class="btn btn-success span12" >用户信息一览</button>
                                <table class="table table-bordered table-hover">
                                    <thead>
                                    <tr>
                                        <th>帐号</th>
                                        <th>姓名</th>
                                        <th><a href="#" class="data_column" sort_key="cd">创建日期</a></th>
                                        <th>身份</th>
                                        <th>手机</th>
                                        <th>邮箱</th>
                                    </tr>
                                    </thead>
                                    <tbody>
                                    {% for user in users %}
                                        <tr>
                                            <td>
                                                <a href="/user_account/edit/{{ user.id }}/" class="btn-link edit_link">{{ user.username }}</a>
                                            </td>
                                            <td>{{ user.get_full_name }}</td>
                                            <td>{{ user.create_datetime|format_date}}</td>
                                            <td>{{ user.groups.all|first }}</td>
                                            <td>{{ user.mobile }}</td>
                                            <td>{{ user.email }}</td>
                                        </tr>
                                    {% endfor %}
                                    </tbody>
                                </table>
                             <button type="button" id="btnRegister" class="btn btn-success span12" >用户信息一览</button>
                            </div>
                        </div>
                    </div>
                </a>
            </div>
            {% endif %}
            {% if income_count == 0 %}
            <div class="item">
                <a href="/income/list/">
                    <div class="row">
                        <div class="span12 alert alert-block">
                            <h4>注意!</h4>
                            目前没有收入信息,请点击添加!。
                        </div>
                    </div>
                </a>
            </div>
            {% else %}
            <div class="item">
                <div class="row">
                    <a href="/income/list/">
                        <div class="span12">
                            <div class="search_result_list">
                             <button type="button" id="btnRegister" class="btn btn-primary span12" >收入信息一览</button>
                                <table class="table table-bordered table-hover">
                                    <thead>
                                    <tr>
                                        <th><a href="#" class="data_column" sort_key="ty">收入类型</a></th>
                                        <th><a href="#" class="data_column" sort_key="am">收入金额</a></th>
                                        <th><a href="#" class="data_column" sort_key="tm">添加时间</a></th>
                                        <th><a href="#" class="data_column" sort_key="hl">操作人员</a></th>
                                        <th><a href="#" class="data_column" sort_key="mk">备&nbsp;&nbsp;注</a></th>
                                    </tr>
                                    </thead>
                                    <tbody>
                                    {% for income in incomes %}
                                        <tr>
                                            <td>
                                                <a href="/income/edit/{{ user.id }}/income/{{ income.id }}/" class="btn-link edit_link">{{ income.income_type }}</a>
                                            </td>
                                            <td>{{ income.income_amount }}</td>
                                            <td>{{ income.create_datetime|format_date }}</td>
                                            <td>{{ income.handler }}</td>
                                            <td>
                                                <a href="javascript: void(0);" class="tip" data-toggle="tooltip" title="{{ income.remarks }}">
                                                    <div style="width: 140px;overflow: hidden;text-overflow: ellipsis;white-space: nowrap;">{{ income.remarks }}</div>
                                                </a>
                                            </td>
                                        </tr>
                                    {% endfor %}
                                    </tbody>
                                </table>
                                 <button type="button" id="btnRegister" class="btn btn-primary span12" >收入信息一览</button>
                            </div>
                        </div>
                    </a>
                </div>
            </div>
            {% endif %}
            {% if expend_count == 0 %}
            <div class="item">
                <a href="/income/expend/list/">
                    <div class="row">
                        <div class="span12 alert alert-block">
                            <h4>注意!</h4>
                            目前没有支出信息,请点击添加!。
                        </div>
                    </div>
                </a>
            </div>
            {% else %}
            <div class="item">
                <a href="/income/expend/list/">
                    <div class="row">
                        <div class="span12">
                            <div class="search_result_list">
                             <button type="button" id="btnRegister" class="btn btn-info span12" >支出信息一览</button>
                                <table class="table table-bordered table-hover">
                                    <thead>
                                    <tr>
                                        <th><a href="#" class="data_column" sort_key="type">支出类型</a></th>
                                        <th><a href="#" class="data_column" sort_key="acc">支出账户</a></th>
                                        <th><a href="#" class="data_column" sort_key="amo">支出金额</a></th>
                                        <th><a href="#" class="data_column" sort_key="bal">账户余额</a></th>
                                        <th><a href="#" class="data_column" sort_key="dat">添加时间</a></th>
                                        <th><a href="#" class="data_column" sort_key="hl">操作人员</a></th>
                                        <th><a href="#" class="data_column" sort_key="mk">备&nbsp;&nbsp;注</a></th>
                                    </tr>
                                    </thead>
                                    <tbody>
                                    {% for expend in expends %}
                                        <tr>
                                            <td>
                                                <a href="/income/expend/edit/{{ user.id }}/expend/{{ expend.id }}/" class="btn-link edit_link">{{ expend.expend_type }}</a>
                                            </td>
                                            <td>{{ expend.expend_account }}</td>
                                            <td>{{ expend.expend_amount }}</td>
                                            <td>{{ expend.balance }}</td>
                                            <td>{{ expend.create_datetime|format_date }}</td>
                                            <td>{{ expend.handler }}</td>
                                            <td>
                                                <a href="javascript: void(0);" class="tip" data-toggle="tooltip" title="{{ expend.remarks }}">
                                                    <div style="width: 140px;overflow: hidden;text-overflow: ellipsis;white-space: nowrap;">{{ expend.remarks }}</div>
                                                </a>
                                            </td>
                                        </tr>
                                    {% endfor %}
                                    </tbody>
                                </table>
                                 <button type="button" id="btnRegister" class="btn btn-info span12" >支出信息一览</button>
                            </div>
                        </div>
                    </div>
                </a>
            </div>
            {% endif %}
            {% if lend_count == 0 %}
            <div class="item">
                <a href="/income/lend/list/">
                    <div class="row">
                        <div class="span12 alert alert-block">
                            <h4>注意!</h4>
                            目前没有借出信息,请点击添加!。
                        </div>
                    </div>
                </a>
            </div>
            {% else %}
            <div class="item">
                <a href="/income/lend/list/">
                    <div class="row">
                        <div class="span12">
                            <div class="search_result_list">
                                <button type="button" id="btnRegister" class="btn btn-warning span12" >借出信息一览</button>
                                <table class="table table-bordered table-hover">
                                    <thead>
                                    <tr>
                                        <th><a href="#" class="data_column" sort_key="op">操作人员</a></th>
                                        <th><a href="#" class="data_column" sort_key="jr">借出款人</a></th>
                                        <th><a href="#" class="data_column" sort_key="jc">借入款人</a></th>
                                        <th><a href="#" class="data_column" sort_key="jj">借出金额</a></th>
                                        <th><a href="#" class="data_column" sort_key="ky">账户余额</a></th>
                                        <th><a href="#" class="data_column" sort_key="jq">借入日期</a></th>
                                        <th><a href="#" class="data_column" sort_key="hq">预还日期</a></th>
                                        <th><a href="#" class="data_column" sort_key="mk">备&nbsp;&nbsp;注</a></th>
                                    </tr>
                                    </thead>
                                    <tbody>
                                    {% for lend in lends %}
                                        <tr>
                                            <td>
                                                <a href="/income/lend/edit/{{ user.id }}/lend/{{ lend.id }}/" class="btn-link edit_link">{{ lend.handler }}</a>
                                            </td>
                                            <td>{{ lend.lend_person }}</td>
                                            <td>{{ lend.borrow_person }}</td>
                                            <td>{{ lend.lend_amount }}</td>
                                            <td>{{ lend.balance }}</td>
                                            <td>{{ lend.lend_datetime|format_date }}</td>
                                            <td>{{ lend.pay_datetime|format_date }}</td>
                                            <td>
                                                <a href="javascript: void(0);" class="tip" data-toggle="tooltip" title="{{ lend.remarks }}">
                                                    <div style="width: 140px;overflow: hidden;text-overflow: ellipsis;white-space: nowrap;">{{ lend.remarks }}</div>
                                                </a>
                                            </td>
                                        </tr>
                                    {% endfor %}
                                    </tbody>
                                </table>
                                <button type="button" id="btnRegister" class="btn btn-warning span12" >借出信息一览</button>
                            </div>
                        </div>
                    </div>
                </a>
            </div>
            {% endif %}
            {% if borrow_count == 0 %}
            <div class="item">
                <a href="/income/borrow/list/">
                    <div class="row">
                        <div class="span12 alert alert-block">
                            <h4>注意!</h4>
                            目前没有借入信息,请点击添加!。
                        </div>
                    </div>
                </a>
            </div>
            {% else %}
            <div class="item">
                <a href="/income/borrow/list/">
                    <div class="row">
                        <div class="span12">
                            <div class="search_result_list">
                                <button type="button" id="btnRegister" class="btn btn-danger span12" >借入信息一览</button>
                                <table class="table table-bordered table-hover">
                                    <thead>
                                    <tr>
                                        <th><a href="#" class="data_column" sort_key="op">操作人员</a></th>
                                        <th><a href="#" class="data_column" sort_key="jr">借入款人</a></th>
                                        <th><a href="#" class="data_column" sort_key="jc">借出款人</a></th>
                                        <th><a href="#" class="data_column" sort_key="jj">借入金额</a></th>
                                        <th><a href="#" class="data_column" sort_key="ky">卡类余额</a></th>
                                        <th><a href="#" class="data_column" sort_key="jq">借入日期</a></th>
                                        <th><a href="#" class="data_column" sort_key="hq">预还日期</a></th>
                                        <th><a href="#" class="data_column" sort_key="mk">备&nbsp;&nbsp;注</a></th>
                                    </tr>
                                    </thead>
                                    <tbody>
                                    {% for borrow in borrows %}
                                        <tr>
                                            <td>
                                                <a href="/income/borrow/edit/{{ user.id }}/borrow/{{ borrow.id }}/" class="btn-link edit_link">{{ borrow.handler }}</a>

                                            </td>
                                            <td>{{ borrow.borrow_person }}</td>
                                            <td>{{ borrow.lend_person }}</td>
                                            <td>{{ borrow.borrow_amount }}</td>
                                            <td>{{ borrow.balance }}</td>
                                            <td>{{ borrow.borrow_datetime|format_date }}</td>
                                            <td>{{ borrow.repay_datetime|format_date }}</td>
                                            <td>
                                                <a href="javascript: void(0);" class="tip" data-toggle="tooltip" title="{{ borrow.remarks }}">
                                                    <div style="width: 140px;overflow: hidden;text-overflow: ellipsis;white-space: nowrap;">{{ borrow.remarks }}</div>
                                                </a>
                                            </td>
                                        </tr>
                                    {% endfor %}
                                    </tbody>
                                </table>
                                <button type="button" id="btnRegister" class="btn btn-danger span12" >借入信息一览</button>
                            </div>
                        </div>
                   </div>
                </a>
            </div>
            {% endif %}
            {% if month_count == 0 %}
            <div class="item">
                <a href="/plan/month/list/">
                    <div class="row">
                        <div class="span12 alert alert-block">
                            <h4>注意!</h4>
                            目前没有月收入信息,请点击添加!。
                        </div>
                    </div>
                </a>
            </div>
            {% else %}
            <div class="item">
                <a href="/plan/month/list/">
                    <div class="row">
                        <div class="span12">
                            <div class="search_result_list">
                                <button type="button" id="btnRegister" class="btn btn-inverse span12" >月收入情况信息一览</button>
                                <table class="table table-bordered table-hover">
                                    <thead>
                                    <tr>
                                        <th><a href="#" class="data_column" sort_key="op">操作人员</a></th>
                                        <th><a href="#" class="data_column" sort_key="jr">工作收入</a></th>
                                        <th><a href="#" class="data_column" sort_key="jc">投资收入</a></th>
                                        <th><a href="#" class="data_column" sort_key="jj">生活支出</a></th>
                                        <th><a href="#" class="data_column" sort_key="ky">其它支出</a></th>
                                        <th><a href="#" class="data_column" sort_key="jq">开始日期</a></th>
                                        <th><a href="#" class="data_column" sort_key="hq">截止日期</a></th>
                                        <th><a href="#" class="data_column" sort_key="mk">备&nbsp;&nbsp;注</a></th>
                                    </tr>
                                    </thead>
                                    <tbody>
                                    {% for m in months %}
                                        <tr>
                                            <td>
                                                <a href="/plan/month/edit/{{ user.id }}/month/{{ m.id }}/" class="btn-link edit_link">{{ m.handler }}</a>

                                            </td>
                                            <td>{{ m.work_income }}</td>
                                            <td>{{ m.investment_income }}</td>
                                            <td>{{ m.life_spend }}</td>
                                            <td>{{ m.other_spend }}</td>
                                            <td>{{ m.start_date|format_date }}</td>
                                            <td>{{ m.end_date|format_date }}</td>
                                            <td>
                                                <a href="javascript: void(0);" class="tip" data-toggle="tooltip" title="{{ m.remarks }}">
                                                    <div style="width: 140px;overflow: hidden;text-overflow: ellipsis;white-space: nowrap;">{{ m.remarks }}</div>
                                                </a>
                                            </td>
                                        </tr>
                                    {% endfor %}
                                    </tbody>
                                </table>
                                <button type="button" id="btnRegister" class="btn btn-inverse span12">月收入情况信息一览</button>
                            </div>
                        </div>
                    </div>
                </a>
            </div>
            {% endif %}
            {% if year_count == 0 %}
            <div class="item">
                <a href="/plan/year/list/">
                    <div class="row">
                        <div class="span12 alert alert-block">
                            <h4>注意!</h4>
                            目前没有年收入信息,请点击添加!。
                        </div>
                    </div>
                </a>
            </div>
            {% else %}
            <div class="item">
                <a href="/plan/year/list/">
                    <div class="row">
                        <div class="span12">
                            <div class="search_result_list">
                                <button type="button" id="btnRegister" class="btn btn-success span12">年收入情况信息一览</button>
                                <table class="table table-bordered table-hover">
                                    <thead>
                                    <tr>
                                        <th><a href="#" class="data_column" sort_key="op">操作人员</a></th>
                                        <th><a href="#" class="data_column" sort_key="jr">工作收入</a></th>
                                        <th><a href="#" class="data_column" sort_key="jc">投资收入</a></th>
                                        <th><a href="#" class="data_column" sort_key="jj">生活支出</a></th>
                                        <th><a href="#" class="data_column" sort_key="ky">其它支出</a></th>
                                        <th><a href="#" class="data_column" sort_key="jq">开始日期</a></th>
                                        <th><a href="#" class="data_column" sort_key="hq">截止日期</a></th>
                                        <th><a href="#" class="data_column" sort_key="mk">备&nbsp;&nbsp;注</a></th>
                                    </tr>
                                    </thead>
                                    <tbody>
                                    {% for y in years %}
                                        <tr>
                                            <td>
                                                <a href="/plan/year/edit/{{ user.id }}/year/{{ y.id }}/" class="btn-link edit_link">{{ y.handler }}</a>
                                            </td>
                                            <td>{{ y.work_income }}</td>
                                            <td>{{ y.investment_income }}</td>
                                            <td>{{ y.life_spend }}</td>
                                            <td>{{ y.other_spend }}</td>
                                            <td>{{ y.start_date|format_date }}</td>
                                            <td>{{ y.end_date|format_date }}</td>
                                            <td>
                                                <a href="javascript: void(0);" class="tip" data-toggle="tooltip" title="{{ y.remarks }}">
                                                    <div style="width: 140px;overflow: hidden;text-overflow: ellipsis;white-space: nowrap;">{{ y.remarks }}</div>
                                                </a>
                                            </td>
                                        </tr>
                                    {% endfor %}
                                    </tbody>
                                </table>
                                <button type="button" id="btnRegister" class="btn btn-success span12">年收入情况信息一览</button>
                            </div>
                        </div>
                    </div>
                </a>
            </div>
            {% endif %}
          </div>
      </div>
      <a class="carousel-control left" href="#myCarousel" data-slide="prev">&lsaquo;</a>
      <a class="carousel-control right" href="#myCarousel" data-slide="next">&rsaquo;</a>
    </div>
    {% endif %}
{% endblock %}